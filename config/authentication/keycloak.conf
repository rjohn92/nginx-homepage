location ^~ /keycloak/ {
    auth_request off;

    # Preserve /keycloak (NO trailing slash)
    proxy_pass http://keycloak:8082;

    # Proxy headers Keycloak/Admin UI expect
    proxy_set_header Host                $host;
    proxy_set_header X-Forwarded-For     $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto   $scheme;
    proxy_set_header X-Forwarded-Host    $host;
    proxy_set_header X-Forwarded-Port    $server_port;
    proxy_set_header X-Forwarded-Prefix  /keycloak;   # helpful with sub-path
    proxy_set_header Forwarded           "proto=$scheme;host=$host";

    proxy_http_version 1.1;
    proxy_redirect off;
    proxy_buffering off;

    # Donâ€™t let a global DENY break admin UI
    add_header X-Frame-Options SAMEORIGIN always;
}
